<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OverType - Custom Theme Example</title>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 40px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }
        
        h1 {
            color: #333;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #666;
            margin-bottom: 30px;
        }
        
        .editor-container {
            height: 400px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 20px;
        }
        
        .theme-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .theme-button {
            padding: 12px;
            border: 2px solid transparent;
            background: #f5f5f5;
            border-radius: 6px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
            font-size: 14px;
        }
        
        .theme-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .theme-button.active {
            border-color: #4a90e2;
            background: #e3f2fd;
        }
        
        .color-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 8px;
        }
        
        .color-input {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .color-input label {
            flex: 1;
            font-size: 13px;
            color: #555;
        }
        
        .color-input input[type="color"] {
            width: 40px;
            height: 30px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .controls {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        button {
            padding: 10px 20px;
            border: none;
            background: #4a90e2;
            color: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
        }
        
        button:hover {
            background: #357abd;
        }
        
        .preset-themes {
            margin-top: 20px;
        }
        
        .preset-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }
        
        .preset-button {
            padding: 8px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: transform 0.2s;
        }
        
        .preset-button:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>OverType Custom Theme Example</h1>
        <p class="subtitle">Create and apply custom color themes</p>
        
        <div class="theme-selector">
            <div class="theme-button active" onclick="selectTheme('solar')">‚òÄÔ∏è Solar</div>
            <div class="theme-button" onclick="selectTheme('cave')">üåô Cave</div>
            <div class="theme-button" onclick="selectTheme('ocean')">üåä Ocean</div>
            <div class="theme-button" onclick="selectTheme('forest')">üå≤ Forest</div>
            <div class="theme-button" onclick="selectTheme('sunset')">üåÖ Sunset</div>
            <div class="theme-button" onclick="selectTheme('custom')">üé® Custom</div>
        </div>
        
        <div id="editor" class="editor-container"></div>
        
        <div id="customizer" style="display: none;">
            <h3>Customize Theme Colors</h3>
            <div class="color-grid">
                <div class="color-input">
                    <label for="bgPrimary">Background Primary</label>
                    <input type="color" id="bgPrimary" value="#faf0ca">
                </div>
                <div class="color-input">
                    <label for="bgSecondary">Background Secondary</label>
                    <input type="color" id="bgSecondary" value="#ffffff">
                </div>
                <div class="color-input">
                    <label for="text">Text</label>
                    <input type="color" id="text" value="#0d3b66">
                </div>
                <div class="color-input">
                    <label for="h1">Header 1</label>
                    <input type="color" id="h1" value="#f95738">
                </div>
                <div class="color-input">
                    <label for="h2">Header 2</label>
                    <input type="color" id="h2" value="#ee964b">
                </div>
                <div class="color-input">
                    <label for="h3">Header 3</label>
                    <input type="color" id="h3" value="#3d8a51">
                </div>
                <div class="color-input">
                    <label for="strong">Bold</label>
                    <input type="color" id="strong" value="#ee964b">
                </div>
                <div class="color-input">
                    <label for="em">Italic</label>
                    <input type="color" id="em" value="#f95738">
                </div>
                <div class="color-input">
                    <label for="link">Links</label>
                    <input type="color" id="link" value="#0d3b66">
                </div>
                <div class="color-input">
                    <label for="code">Code</label>
                    <input type="color" id="code" value="#0d3b66">
                </div>
                <div class="color-input">
                    <label for="blockquote">Blockquote</label>
                    <input type="color" id="blockquote" value="#5a7a9b">
                </div>
                <div class="color-input">
                    <label for="cursor">Cursor</label>
                    <input type="color" id="cursor" value="#f95738">
                </div>
            </div>
            
            <div class="controls">
                <button onclick="applyCustomTheme()">Apply Custom Theme</button>
                <button onclick="exportTheme()">Export Theme</button>
                <button onclick="resetColors()">Reset Colors</button>
            </div>
        </div>
        
        <div class="preset-themes">
            <h3>Quick Presets</h3>
            <div class="preset-grid">
                <button class="preset-button" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;" onclick="applyPreset('valentine')">Valentine</button>
                <button class="preset-button" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white;" onclick="applyPreset('aqua')">Aqua</button>
                <button class="preset-button" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); color: white;" onclick="applyPreset('mint')">Mint</button>
                <button class="preset-button" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); color: white;" onclick="applyPreset('sunset')">Sunset</button>
                <button class="preset-button" style="background: linear-gradient(135deg, #30cfd0 0%, #330867 100%); color: white;" onclick="applyPreset('galaxy')">Galaxy</button>
                <button class="preset-button" style="background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); color: #333;" onclick="applyPreset('pastel')">Pastel</button>
            </div>
        </div>
    </div>

    <script src="../dist/overtype.js"></script>
    <script>
        const OT = window.OverType?.default || window.OverType;
        // Custom theme definitions
        const customThemes = {
            ocean: {
                name: 'ocean',
                colors: {
                    bgPrimary: '#e0f7fa',
                    bgSecondary: '#ffffff',
                    text: '#006064',
                    h1: '#00acc1',
                    h2: '#0097a7',
                    h3: '#00838f',
                    strong: '#0097a7',
                    em: '#00acc1',
                    link: '#0277bd',
                    code: '#006064',
                    codeBg: 'rgba(0, 188, 212, 0.1)',
                    blockquote: '#00838f',
                    hr: '#0097a7',
                    syntaxMarker: 'rgba(0, 96, 100, 0.5)',
                    cursor: '#00acc1',
                    selection: 'rgba(0, 188, 212, 0.3)'
                }
            },
            forest: {
                name: 'forest',
                colors: {
                    bgPrimary: '#f1f8e9',
                    bgSecondary: '#ffffff',
                    text: '#1b5e20',
                    h1: '#4caf50',
                    h2: '#66bb6a',
                    h3: '#81c784',
                    strong: '#388e3c',
                    em: '#689f38',
                    link: '#2e7d32',
                    code: '#1b5e20',
                    codeBg: 'rgba(139, 195, 74, 0.15)',
                    blockquote: '#558b2f',
                    hr: '#66bb6a',
                    syntaxMarker: 'rgba(27, 94, 32, 0.5)',
                    cursor: '#4caf50',
                    selection: 'rgba(139, 195, 74, 0.3)'
                }
            },
            sunset: {
                name: 'sunset',
                colors: {
                    bgPrimary: '#fff3e0',
                    bgSecondary: '#ffffff',
                    text: '#e65100',
                    h1: '#ff6f00',
                    h2: '#ff8f00',
                    h3: '#ffa000',
                    strong: '#f57c00',
                    em: '#ff9800',
                    link: '#e65100',
                    code: '#e65100',
                    codeBg: 'rgba(255, 152, 0, 0.15)',
                    blockquote: '#f57c00',
                    hr: '#ff8f00',
                    syntaxMarker: 'rgba(230, 81, 0, 0.5)',
                    cursor: '#ff6f00',
                    selection: 'rgba(255, 152, 0, 0.3)'
                }
            }
        };

        const presetThemes = {
            valentine: {
                bgPrimary: '#ffe0ec',
                text: '#880e4f',
                h1: '#e91e63',
                h2: '#f06292',
                strong: '#e91e63',
                em: '#f06292'
            },
            aqua: {
                bgPrimary: '#e0f7fa',
                text: '#006064',
                h1: '#00acc1',
                h2: '#26c6da',
                strong: '#00acc1',
                em: '#26c6da'
            },
            mint: {
                bgPrimary: '#e8f5e9',
                text: '#1b5e20',
                h1: '#4caf50',
                h2: '#66bb6a',
                strong: '#4caf50',
                em: '#66bb6a'
            },
            galaxy: {
                bgPrimary: '#1a1a2e',
                bgSecondary: '#16213e',
                text: '#eaeaea',
                h1: '#f39c12',
                h2: '#e74c3c',
                strong: '#3498db',
                em: '#9b59b6'
            },
            pastel: {
                bgPrimary: '#ffeaa7',
                text: '#2d3436',
                h1: '#fd79a8',
                h2: '#a29bfe',
                strong: '#fd79a8',
                em: '#a29bfe'
            }
        };

        // Initialize editor
        const [editor] = new OT('#editor', {
            value: `# Custom Theme Demo

This editor supports **custom themes** with full color customization.

## Built-in Themes

Choose from **Solar**, *Cave*, or create your own!

## Features

- \`Live theme switching\`
- **Bold** and *italic* text
- [Links](https://example.com)
- Inline \`code\` snippets

> Blockquotes look great too!

### Try Different Themes

1. Click the theme buttons above
2. Select "Custom" to create your own
3. Export your theme configuration

---

Happy theming! üé®`,
            theme: 'solar'
        });

        let currentTheme = 'solar';
        
        function selectTheme(themeName) {
            // Update active button
            document.querySelectorAll('.theme-button').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Show/hide customizer
            const customizer = document.getElementById('customizer');
            customizer.style.display = themeName === 'custom' ? 'block' : 'none';
            
            // Apply theme
            if (themeName === 'custom') {
                applyCustomTheme();
            } else if (customThemes[themeName]) {
                OT.setTheme(customThemes[themeName]);
            } else {
                OT.setTheme(themeName);
            }
            
            currentTheme = themeName;
        }
        
        function applyCustomTheme() {
            const colors = {};
            const inputs = document.querySelectorAll('.color-input input');
            
            inputs.forEach(input => {
                colors[input.id] = input.value;
            });
            
            const customTheme = {
                name: 'custom',
                colors: colors
            };
            
            OT.setTheme(customTheme);
            console.log('Applied custom theme:', customTheme);
        }
        
        function applyPreset(presetName) {
            const preset = presetThemes[presetName];
            if (preset) {
                // Merge with solar theme as base
                const theme = {
                    name: presetName,
                    colors: {
                        ...OT.themes.solar.colors,
                        ...preset
                    }
                };
                editor.setTheme(theme);
                console.log('Applied preset:', presetName);
            }
        }
        
        function exportTheme() {
            const colors = {};
            const inputs = document.querySelectorAll('.color-input input');
            
            inputs.forEach(input => {
                colors[input.id] = input.value;
            });
            
            const themeConfig = {
                name: 'my-custom-theme',
                colors: colors
            };
            
            const json = JSON.stringify(themeConfig, null, 2);
            console.log('Theme configuration:', json);
            
            // Copy to clipboard
            navigator.clipboard.writeText(json).then(() => {
                alert('Theme configuration copied to clipboard!');
            });
        }
        
        function resetColors() {
            const solarColors = OT.themes.solar.colors;
            
            Object.keys(solarColors).forEach(key => {
                const input = document.getElementById(key);
                if (input) {
                    // Convert to hex if needed
                    let color = solarColors[key];
                    if (color.startsWith('rgba')) {
                        // Skip rgba colors for color inputs
                        return;
                    }
                    input.value = color;
                }
            });
            
            applyCustomTheme();
        }
    </script>
</body>
</html>